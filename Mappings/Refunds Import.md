
<h2>Mapping</h2>
<h3>Payments Screen</h3>
<p>The following is a mapping for the&nbsp;<strong>Customer Refund</strong>&nbsp;in the<strong>&nbsp;Payments and Applications</strong>&nbsp;in Acumatica</p>
<table>
<thead>
<tr>
<th colspan="6" style="text-align: center;"><span style="color: rgb(0,0,0);">WooCommerce to Acumatica Payments Record</span></th></tr></thead>
<tbody>
<tr>
<th colspan="2"><span style="color: rgb(0,0,0);">Source Fields</span></th>
<th>&nbsp;</th>
<th colspan="2"><span style="color: rgb(0,0,0);">Target Fields</span></th>
<th>&nbsp;</th></tr>
<tr>
<th><span style="color: rgb(0,0,0);">WooCommerce Field Name</span></th>
<th><span style="color: rgb(0,0,0);">WooCommerce API</span></th>
<th>&nbsp;</th>
<th><span style="color: rgb(0,0,0);">Acumatica Screen Name</span></th>
<th><span style="color: rgb(0,0,0);">Acumatica Entity</span></th>
<th><span style="color: rgb(0,0,0);">Import Rules</span></th></tr>
<tr>
<td colspan="1"><span style="color: rgb(0,0,0);"><strong>Orders Header</strong></span></td>
<td colspan="1">&nbsp;</td>
<td colspan="1">&nbsp;</td>
<td colspan="1"><span style="color: rgb(0,0,0);"><strong>Payments Record</strong></span></td>
<td colspan="1">&nbsp;</td>
<td colspan="1">&nbsp;</td></tr>
<tr>
<td colspan="1">&nbsp;</td>
<td colspan="1">&nbsp;</td>
<td colspan="1">&nbsp;</td>
<td colspan="1"><span style="color: rgb(0,0,0);">Payment Type</span></td>
<td colspan="1"><span style="color: rgb(0,0,0);">Payment</span></td>
<td colspan="1"><span style="color: rgb(0,0,0);">Set to &quot;CR - Customer Refund&quot;</span></td></tr>
<tr>
<td colspan="1">&nbsp;</td>
<td colspan="1">&nbsp;</td>
<td colspan="1">&nbsp;</td>
<td colspan="1"><span style="color: rgb(0,0,0);">Status</span></td>
<td colspan="1"><span style="color: rgb(0,0,0);">Payment</span></td>
<td colspan="1"><span style="color: rgb(0,0,0);">Automatically set to &quot;Balanced&quot;</span></td></tr>
<tr>
<td>
<pre class=" microlight"><span style="color: rgb(0,0,0);"><code class="language-json">date_created</code></span></pre></td>
<td><span style="color: rgb(0,0,0);">Refunds</span></td>
<td>&nbsp;</td>
<td><span style="color: rgb(0,0,0);">ApplicationDate</span></td>
<td><span style="color: rgb(0,0,0);">Payment</span></td>
<td>&nbsp;</td></tr>
<tr>
<td colspan="1">&nbsp;</td>
<td colspan="1">&nbsp;</td>
<td colspan="1">&nbsp;</td>
<td colspan="1"><span style="color: rgb(0,0,0);">Payment Ref</span></td>
<td colspan="1"><span style="color: rgb(0,0,0);">Payment</span></td>
<td colspan="1"><span style="color: rgb(0,0,0);">The sequence generated by Payment.</span></td></tr>
<tr>
<td><span style="color: rgb(0,0,0);">customer_id</span></td>
<td><span style="color: rgb(0,0,0);">Order</span></td>
<td>&nbsp;</td>
<td><span style="color: rgb(0,0,0);">Customer</span></td>
<td><span style="color: rgb(0,0,0);">Payment</span></td>
<td>&nbsp;</td></tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><span style="color: rgb(0,0,0);">Location</span></td>
<td><span style="color: rgb(0,0,0);">Payment</span></td>
<td><span style="color: rgb(0,0,0);">Equals CustomerLocationID from the original sales order header.</span></td></tr>
<tr>
<td colspan="1"><span style="color: rgb(0,0,0);">payment_method</span></td>
<td colspan="1"><span style="color: rgb(0,0,0);">Order</span></td>
<td colspan="1">&nbsp;</td>
<td colspan="1"><span style="color: rgb(0,0,0);">Payment Method</span></td>
<td colspan="1"><span style="color: rgb(0,0,0);">Payment</span></td>
<td colspan="1">
<p><span style="color: rgb(0,0,0);">Equals Payment Method ID from the Payment Method Mapping in the Payment Settings in the Stores screen.</span></p>
<p><span style="color: rgb(0,0,0);">The store's Payment Method is mapped to the Acumatica Payment Method ID.</span></p></td></tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><span style="color: rgb(0,0,0);">CashAccount</span></td>
<td><span style="color: rgb(0,0,0);">Payment</span></td>
<td>
<p><span style="color: rgb(0,0,0);">Is taken from the corresponding payment method in Store settings.</span></p>
<p><span style="color: rgb(0,0,0);">It will be chosen by Payment Method (Provider_ID/Gateway and Currency ID)</span></p></td></tr>
<tr>
<td><span style="color: rgb(0,0,0);">currency</span></td>
<td><span style="color: rgb(0,0,0);">Order</span></td>
<td>&nbsp;</td>
<td><span style="color: rgb(0,0,0);">CurrencyID</span></td>
<td><span style="color: rgb(0,0,0);">Payment</span></td>
<td><span style="color: rgb(0,0,0);">This is taken from the original Sales Order currency field.</span></td></tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><span style="color: rgb(0,0,0);">Description</span></td>
<td><span style="color: rgb(0,0,0);">Payment</span></td>
<td>
<p><span style="color: rgb(0,0,0);">WooCommerce Order # || Refund # || Gateway (optional)</span></p></td></tr>
<tr>
<td colspan="1">
<pre class=" microlight"><span style="color: rgb(0,0,0);"><code class="language-json">total +</code></span></pre>
<pre class=" microlight"><span style="color: rgb(0,0,0);"><code class="language-json">total_tax (all lines)</code></span></pre></td>
<td colspan="1"><span style="color: rgb(0,0,0);">Refunds</span></td>
<td colspan="1">&nbsp;</td>
<td colspan="1"><span style="color: rgb(0,0,0);">Payment Amount</span></td>
<td colspan="1"><span style="color: rgb(0,0,0);">Payment</span></td>
<td colspan="1">&nbsp;</td></tr>
<tr>
<td colspan="1">
<pre class=" microlight"><span style="color: rgb(0,51,102);"><code class="language-json">total +</code></span></pre>
<pre class=" microlight"><span style="color: rgb(0,51,102);"><code class="language-json">total_tax (all lines)</code></span></pre></td>
<td colspan="1"><span style="color: rgb(0,51,102);">Refunds</span></td>
<td colspan="1">&nbsp;</td>
<td colspan="1"><span style="color: rgb(0,51,102);">Applied to Order</span></td>
<td colspan="1"><span style="color: rgb(0,51,102);">Payment</span></td>
<td colspan="1"><span style="color: rgb(0,51,102);">Equals Payment Amount</span></td></tr>
<tr>
<td colspan="6">&nbsp;</td></tr>
<tr>
<td colspan="1"><strong>Financial Details</strong></td>
<td colspan="1">&nbsp;</td>
<td colspan="1">&nbsp;</td>
<td colspan="1">&nbsp;</td>
<td colspan="1">&nbsp;</td>
<td colspan="1">&nbsp;</td></tr>
<tr>
<td colspan="1">Branch</td>
<td colspan="1">Order</td>
<td colspan="1">&nbsp;</td>
<td colspan="1">Branch</td>
<td colspan="1">&nbsp;</td>
<td colspan="1">Equals Branch from Original Order Branch (WooCommerce Stores screen Order Settings tab)</td></tr>
<tr>
<td colspan="1">Created Date</td>
<td colspan="1">Refund</td>
<td colspan="1">&nbsp;</td>
<td colspan="1">Payment Date</td>
<td colspan="1">&nbsp;</td>
<td colspan="1">&nbsp;</td></tr></tbody></table>
<h3>Sales Orders - Return for Credit</h3>
<p><span style="color: rgb(0,0,0);">This is for when the Original Sales Order is at &quot;Completed&quot; status when synchronizing the Refund.</span></p>
<p><span style="color: rgb(0,51,102);"><strong>Summary Area</strong></span></p>
<p><span style="color: rgb(255,0,0);">&nbsp;</span></p>
<table>
<thead>
<tr>
<th colspan="6" style="text-align: center;">WooCommerce to Acumatica Sales Order <strong>Summary Area</strong></th></tr></thead>
<tbody>
<tr>
<th colspan="2">Source Fields</th>
<th colspan="1">&nbsp;</th>
<th colspan="2">Target Fields</th>
<th colspan="1">&nbsp;</th></tr>
<tr>
<th colspan="1">WooCommerce Field Name</th>
<th colspan="1">WooCommerce API</th>
<th colspan="1">&nbsp;</th>
<th colspan="1">Acumatica Screen Name</th>
<th colspan="1">Acumatica Entity</th>
<th colspan="1">Import Rules</th></tr>
<tr>
<td colspan="1">N/A</td>
<td colspan="1"><span>N/A</span></td>
<td colspan="1">&nbsp;</td>
<td colspan="1">Order Type</td>
<td colspan="1">Sales Order</td>
<td colspan="1">
<p>Fetch from the<em> WooCommerce Stores&gt;Order Settings tab&gt;Return Order Type field </em></p>
<p><em>e.g: Return for Credit (RC)</em></p></td></tr>
<tr>
<td colspan="1"><span>N/A</span></td>
<td colspan="1"><span>N/A</span></td>
<td colspan="1">&nbsp;</td>
<td colspan="1">Status</td>
<td colspan="1"><span>Sales Order</span></td>
<td colspan="1">Should be <em>Open</em> Status</td></tr>
<tr>
<td colspan="1">
<pre class=" microlight"><code class="language-json">date_created</code></pre></td>
<td colspan="1">Refunds</td>
<td colspan="1">&nbsp;</td>
<td colspan="1">Date</td>
<td colspan="1"><span>Sales Order</span></td>
<td colspan="1">&nbsp;</td></tr>
<tr>
<td colspan="1">
<pre class=" microlight"><code class="language-json">date_created</code></pre></td>
<td colspan="1"><span>Refunds</span></td>
<td colspan="1">&nbsp;</td>
<td colspan="1">Requested On</td>
<td colspan="1"><span>Sales Order</span></td>
<td colspan="1">&nbsp;</td></tr>
<tr>
<td colspan="1">id</td>
<td colspan="1"><span>Refunds</span></td>
<td colspan="1">&nbsp;</td>
<td colspan="1">Description</td>
<td colspan="1"><span>Sales Order</span></td>
<td colspan="1">
<p>Store_name <span>| Order:Nbr <span>| <span>Status: Refunded</span></span></span></p>
<p>e.g: SWEETSTOREDAN | Order: 333 | Status: Refunded</p></td></tr>
<tr>
<td colspan="1"><span style="color: rgb(0,0,0);">customer_id</span></td>
<td colspan="1">Order</td>
<td colspan="1">&nbsp;</td>
<td colspan="1">Customer</td>
<td colspan="1"><span>Sales Order</span></td>
<td colspan="1">&nbsp;</td></tr>
<tr>
<td colspan="1"><span>id</span></td>
<td colspan="1"><span>Refunds</span></td>
<td colspan="1">&nbsp;</td>
<td colspan="1">External Reference Nbr</td>
<td colspan="1"><span>Sales Order</span></td>
<td colspan="1">Order ID + Store Name</td></tr>
<tr>
<td colspan="1"><span>id</span></td>
<td colspan="1"><span>Refunds</span></td>
<td colspan="1">&nbsp;</td>
<td colspan="1">Customer Order Nbr</td>
<td colspan="1"><span>Sales Order</span></td>
<td colspan="1">WooCommerce Order Number should be fetched here</td></tr></tbody></table>
<p><strong><br /></strong></p>
<p><strong>Details Tab</strong></p>
<p>&nbsp;</p>
<table>
<thead>
<tr>
<th colspan="6" style="text-align: center;">WooCommerce to Acumatica Sales Order <strong>Summary Area</strong></th></tr></thead>
<tbody>
<tr>
<th colspan="2">Source Fields</th>
<th colspan="1">&nbsp;</th>
<th colspan="2">Target Fields</th>
<th colspan="1">&nbsp;</th></tr>
<tr>
<th colspan="1">WooCommerce Field Name</th>
<th colspan="1">WooCommerce API</th>
<th colspan="1">&nbsp;</th>
<th colspan="1">Acumatica Screen Name</th>
<th colspan="1">Acumatica Entity</th>
<th colspan="1">Import Rules</th></tr>
<tr>
<td colspan="1">
<pre class=" microlight"><code class="language-json">product_id</code></pre></td>
<td colspan="1">Refunds</td>
<td colspan="1">&nbsp;</td>
<td colspan="1">Inventory ID</td>
<td colspan="1"><span>Sales Order</span></td>
<td colspan="1"><span>If the quantity is more than &quot;0&quot; </span></td></tr>
<tr>
<td colspan="1">
<pre class=" microlight"><code class="language-json">quantity</code></pre></td>
<td colspan="1"><span>Refunds</span></td>
<td colspan="1">&nbsp;</td>
<td colspan="1">Quantity</td>
<td colspan="1"><span>Sales Order</span></td>
<td colspan="1">If the quantity is &quot;0&quot; the refund line should be created from the 'Refund Amount Item' specified in the WooCommerce Stores settings.</td></tr>
<tr>
<td colspan="1"><span>N/A</span></td>
<td colspan="1"><span>N/A</span></td>
<td colspan="1">&nbsp;</td>
<td colspan="1">Manual Price</td>
<td colspan="1"><span>Sales Order</span></td>
<td colspan="1">Checkbox is selected</td></tr>
<tr>
<td colspan="1"><span>N/A</span></td>
<td colspan="1"><span>N/A</span></td>
<td colspan="1">&nbsp;</td>
<td colspan="1">Discount Amount</td>
<td colspan="1"><span>Sales Order</span></td>
<td colspan="1">
<p>Calculated based on the original AC Sales Order discount percentage</p></td></tr>
<tr>
<td colspan="1"><span>N/A</span></td>
<td colspan="1"><span>N/A</span></td>
<td colspan="1">&nbsp;</td>
<td colspan="1">Manual Discount</td>
<td colspan="1"><span>Sales Order</span></td>
<td colspan="1"><span>The checkbox is selected when the discount is available</span></td></tr>
<tr>
<td colspan="1"><span>N/A</span></td>
<td colspan="1"><span>N/A</span></td>
<td colspan="1">&nbsp;</td>
<td colspan="1">Reason Code</td>
<td colspan="1"><span>Sales Order</span></td>
<td colspan="1"><em>WooCommerce Stores&gt;Order Settings tab&gt;Refund Reason Code</em></td></tr>
<tr>
<td colspan="1">
<pre class=" microlight"><code class="language-json">total</code></pre></td>
<td colspan="1"><span>Refunds</span></td>
<td colspan="1">&nbsp;</td>
<td colspan="1">Ext Price</td>
<td colspan="1"><span>Sales Order</span></td>
<td colspan="1">Refund line total (WC) / (100-Discount%) * 100</td></tr></tbody></table>
<p>&nbsp;</p>
<h5>Discounts Tab</h5>
<p>Discounts:</p>
<p>Discount amounts will not appear in the WC Refunds API.</p>
<ul>
<li>Line Level Discount:&nbsp; Using the total amount (WC Refund API&gt; line level) discount should be calculated.<br /><br />Line Level Discountable Amount =&nbsp;<span>Refund line total (WC) / (100-Discount%) * 100</span><br /><span>Discount Amount =&nbsp;Line Level Discountable Amount * Discount Percentage (from AC Original Sales Order)</span><br /><span><br /></span></li>
<li>Document Level Discounts: When document level discount is available in the Extended Price of order line should be calculated as follows,&nbsp;<br /><br /><span>Ext Price =&nbsp;<span>Refund line total (WC) / (100-Discount%) * 100</span></span><br /><span><span><br /></span></span><span><span>In this case, the Discountable Amount of the Discount Details tab will be automatically calculated and after applying the original sales order discount percentage Discount Amount can be calculated.</span></span></li></ul>
<p>The following is a mapping for the&nbsp;<strong>Sales Order Discount Details</strong>&nbsp;tab:</p>
<table>
<thead>
<tr>
<th colspan="6" style="text-align: center;">WooCommerce to Acumatica Sales Order Discount Details</th></tr></thead>
<tbody>
<tr>
<th colspan="2">Source Fields</th>
<th colspan="1">&nbsp;</th>
<th colspan="2">Target Fields</th>
<th colspan="1">&nbsp;</th></tr>
<tr>
<th colspan="1">WooCommerce Field Name</th>
<th colspan="1">WooCommerce API</th>
<th colspan="1">&nbsp;</th>
<th colspan="1">Acumatica Screen Name</th>
<th colspan="1">Acumatica Entity</th>
<th colspan="1">Import Rules</th></tr>
<tr>
<td><strong>Refunds</strong></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><strong>Sales Order -&gt; Discount Details Tab</strong></td>
<td>&nbsp;</td>
<td>&nbsp;</td></tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Type</td>
<td>Discounts</td>
<td>Set as &quot;External Document&quot;</td></tr>
<tr>
<td colspan="1">&nbsp;</td>
<td colspan="1">&nbsp;</td>
<td colspan="1">&nbsp;</td>
<td colspan="1">Manual Discount</td>
<td colspan="1">Discounts</td>
<td colspan="1">Checked</td></tr>
<tr>
<td colspan="1">&nbsp;</td>
<td colspan="1">&nbsp;</td>
<td colspan="1">&nbsp;</td>
<td colspan="1">Discountable Amount</td>
<td colspan="1">Discounts</td>
<td colspan="1">Line level discountable amount will be adjusted through Ext Price of each order line, therefore appropriate discountable amount is automatically calculated</td></tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Discountable Qty</td>
<td>Discounts</td>
<td>null&nbsp;</td></tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Discount Amount</td>
<td>Discounts</td>
<td>
<p>Calculated</p></td></tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Discount Percentage</td>
<td>Payments</td>
<td>Get Discount Percentage from the Original Sales order (AC)</td></tr>
<tr>
<td colspan="1">&nbsp;</td>
<td colspan="1">&nbsp;</td>
<td colspan="1">&nbsp;</td>
<td colspan="1">External Discount Code</td>
<td colspan="1">Payments</td>
<td colspan="1">
<p><span>Get Discount <span>Original Sales order (AC)</span></span></p></td></tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Description</td>
<td>Payments</td>
<td>
<p>Get the Description from the Discount detail table of the original sales order.</p></td></tr></tbody></table>
<h5>Tax Details Tab</h5>
<p>Taxes:</p>
<ul>
<li>Taxes should be refunded based on the WC Refunds API amounts, but the maximum tax amount should be limited to the WC Original Sales Order Tax amount.</li>
<li>When the tax amount is exceeded compared to the original sales order, it can be filtered during synchronization or can be added to the Refund Amount Item.</li></ul>
<h3><br /><br /></h3>
